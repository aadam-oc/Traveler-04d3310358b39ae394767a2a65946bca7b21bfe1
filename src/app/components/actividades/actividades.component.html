<div class="layout">
    <form [formGroup]="form" class="form-container">
        <!-- Pa√≠s -->
        <div class="form-group">
            <label for="pais">üåç Pa√≠s:</label>
            <select formControlName="pais" id="pais">
                <option value>-- Selecciona un pa√≠s --</option>
                <option *ngFor="let country of paises" [value]="country">{{
                    country
                    }}</option>
            </select>
        </div>

        <!-- Ciudades del pa√≠s seleccionado -->
        <div *ngIf="ciudades.length > 0" class="tree-container">
            <div class="tree-node expand">
                <span class="tree-label">üìÅ {{ form.value.pais }}</span>
                <ul class="tree-children">
                    <li *ngFor="let city of ciudades">
                        <label>
                            <input type="radio" formControlName="ciudad"
                                [value]="city" name="ciudad" />
                            {{ city }}
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Rango de precio -->
        <div class="form-group">
            <label for="priceRange">üí∞ Rango de Precio:</label>
            <input type="range" formControlName="priceRange" id="priceRange"
                min="15" max="700" step="5" />
            <span>0‚Ç¨ - {{ form.value.priceRange }}‚Ç¨</span>
        </div>
    </form>

    <div class="tarjetas-grid">
        <!-- Lista de actividades filtradas -->
        <div class="actividad expand"
            *ngFor="let actividad of actividadesFiltradas | paginate: { itemsPerPage: 6, currentPage: p }">
            <img class="fto-actividad" [src]="actividad.nombre_imagen_actividad"
                alt="Actividad" />
            <div class="contenido">
                <div class="titulo">{{ actividad.nombre_tipo_actividad }}</div>
                <p>{{ actividad.pais }}, {{ actividad.ciudad }}</p>
                <p class="descripcion">Descripci√≥n: {{ actividad.descripcion }}
                </p>
                <div class="botones">
                    <div class="precio">{{ actividad.precio }}‚Ç¨/H</div>
                    <button class="saber-mas" (click)="abrirModal(actividad)">
                        Saber M√°s
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Paginaci√≥n -->
<div class="paginacion">
    <pagination-controls (pageChange)="p = $event"
        previousLabel="Anterior"
        nextLabel="Siguiente">
    </pagination-controls>
</div>

<!-- Modal -->
<div class="modal-overlay" *ngIf="actividadSeleccionada"
    (click)="cerrarModal($event)">
    <div class="modal-contenido" [class.modal-abierto]="actividadSeleccionada">
        <button class="cerrar-modal" (click)="cerrarModal($event)">√ó</button>

        <div class="modal-header">
            <h2>{{ actividadSeleccionada.nombre_tipo_actividad }}</h2>
            <div class="modal-ubicacion">
                <span class="modal-pais">üåç {{ actividadSeleccionada.pais
                    }}</span>
                <span class="modal-ciudad">üìç {{ actividadSeleccionada.ciudad
                    }}</span>
            </div>
        </div>

        <div class="modal-body">
            <div class="modal-imagen-container">
                <img [src]="actividadSeleccionada.nombre_imagen_actividad"
                    alt="Imagen de actividad" class="modal-imagen">
            </div>

            <div class="modal-info">
                <div class="modal-seccion">
                    <h3>Descripci√≥n</h3>
                    <p>{{ actividadSeleccionada.descripcion }}</p>
                </div>

                <div class="modal-seccion">
                    <h3>Detalles</h3>
                    <div class="modal-detalles">
                        <div class="detalle-item">
                            <span class="detalle-label">Precio:</span>
                            <span class="detalle-valor precio-destacado">{{
                                actividadSeleccionada.precio }}‚Ç¨/H</span>
                        </div>
                        <!-- Puedes a√±adir m√°s detalles aqu√≠ si tienes m√°s informaci√≥n en tu modelo de datos -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-footer">
            <button class="btn-reservar">Reservar Ahora</button>
        </div>
    </div>
</div>