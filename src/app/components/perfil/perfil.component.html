<h1 class="titulo">¡Bienvenido, {{ nombre }}!</h1>

<!-- INFO PERFIL -->
<div class="card">
  <img
    class="foto-usuario"
    [src]="foto || 'http://172.17.131.14:3000/uploads/1743518085523.png'"
    alt="Foto del usuario" />

  <div class="card-info">
    <p class="nombre"><strong>Nombre:</strong> {{ nombre }}</p>
    <p class="apellido"><strong>Apellidos:</strong> {{ apellido1 }} {{ apellido2
      }}</p>
    <p class="correo"><strong>Correo:</strong> {{ correo }}</p>
    <p class="telefono"><strong>Teléfono 1:</strong> {{ telefono1 }}</p>
    <p class="telefono"><strong>Teléfono 2:</strong> {{ telefono2 ||
      'No proporcionado' }}</p>

    <button class="edit-btn" (click)="openModal()">EDITAR PERFIL</button>
  </div>
</div>

<!-- RESERVAS -->
<div class="card reservas-card">
    <div class="card-info">
      <h2>Mis Reservas</h2>
      <ng-container *ngIf="tieneReservas(); else sinReservas">
        <div *ngIf="reservasAlojamiento.length > 0">
          <h3>Reserva de Alojamiento</h3>
          <ul>
            <li *ngFor="let r of reservasAlojamiento">
              {{ r.nombre_alojamiento }} - {{ r.fecha_entrada_alojamiento }} a
              {{ r.fecha_salida_alojamiento }}
            </li>
          </ul>
        </div>
        <div *ngIf="reservasActividades.length > 0">
          <h3>Actividades</h3>
          <ul>
            <li *ngFor="let r of reservasActividades">
              {{ r.nombre_actividad }} - {{ r.fecha_actividad }} {{
              r.hora_actividad }}
            </li>
          </ul>
        </div>
        <div *ngIf="reservasVehiculos.length > 0">
          <h3>Vehículos de Alquiler</h3>
          <ul>
            <li *ngFor="let r of reservasVehiculos">
              {{ r.nombre_vehiculo }} - {{ r.fecha_inicio }} a {{ r.fecha_fin }}
            </li>
          </ul>
        </div>
        <div *ngIf="reservasVuelos.length > 0">
          <h3>Vuelos</h3>
          <ul>
            <li *ngFor="let r of reservasVuelos">
              {{ r.origen }} → {{ r.destino }} - {{ r.fecha_vuelo }}
            </li>
          </ul>
        </div>
      </ng-container>
      <ng-template #sinReservas>
        <p>(No tienes ninguna Reserva)</p>
      </ng-template>
    </div>
  </div>

<br /><br />

<!-- DASHBOARD -->
<div class="dashboard-container">
  <a routerLink="/dashboard" class="dashboard-link">Ir al Dashboard</a>
</div>

<!-- Modal de edición -->
<div class="modal" *ngIf="modalActive">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h2>Editar Perfil</h2>

    <form [formGroup]="editarUsuarioForm" (ngSubmit)="onSubmitEditar()">
      <div>
        <label for="correo">Correo:</label>
        <input id="correo" type="email" formControlName="correo" />
      </div>
      <div>
        <label for="contrasena">Contraseña:</label>
        <input id="contrasena" type="password" formControlName="contrasena" />
      </div>
      <div>
        <label for="id_rol">ID Rol:</label>
        <input id="id_rol" type="text" formControlName="id_rol" />
      </div>
      <div>
        <label for="nombre">Nombre:</label>
        <input id="nombre" type="text" formControlName="nombre" />
      </div>
      <div>
        <label for="apellido1">Primer Apellido:</label>
        <input id="apellido1" type="text" formControlName="apellido1" />
      </div>
      <div>
        <label for="apellido2">Segundo Apellido:</label>
        <input id="apellido2" type="text" formControlName="apellido2" />
      </div>
      <div>
        <label for="telefono1">Teléfono 1:</label>
        <input id="telefono1" type="text" formControlName="telefono1" />
      </div>
      <div>
        <label for="telefono2">Teléfono 2:</label>
        <input id="telefono2" type="text" formControlName="telefono2" />
      </div>
      <button type="submit">Guardar</button>
    </form>
  </div>
</div>