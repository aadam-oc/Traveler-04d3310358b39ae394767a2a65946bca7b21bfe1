<div class="layout">
  <!-- FILTROS -->
  <form [formGroup]="filtrosForm" class="form-container">
    <!-- Tipo de VehÃ­culo -->
    <div class="form-group">
      <label for="tipoVehiculo">ðŸš— Tipo de VehÃ­culo:</label>
      <select formControlName="tipoVehiculo" id="tipoVehiculo">
        <option value>-- Selecciona un tipo --</option>
        <option *ngFor="let tipo of tiposVehiculo" [value]="tipo">{{ tipo }}</option>
      </select>
    </div>

    <!-- Rango de precio -->
    <div class="form-group">
      <label for="priceRange">ðŸ’° Rango de Precio:</label>
      <input type="range" formControlName="priceRange" id="priceRange" min="10" max="200" step="5" />
      <span>0â‚¬ - {{ filtrosForm.value.priceRange }}â‚¬</span>
    </div>
  </form>

  <!-- CARDS -->
  <div *ngIf="vehiculosFiltrados.length > 0; else sinVehiculos" class="tarjetas-grid">
    <div *ngFor="let vehiculo of vehiculosFiltrados" class="vehiculo">
      <!-- Imagen del vehÃ­culo -->
      <img class="fto-vehiculo" [src]="vehiculo.imagen" alt="Imagen del vehÃ­culo">
      <div class="contenido">
        <!-- Nombre del vehÃ­culo -->
        <p class="titulo">{{ vehiculo.nombre_vehiculo }}</p>
        <!-- Tipo de vehÃ­culo -->
        <p class="descripcion">Tipo: {{ vehiculo.nombre_tipo_vehiculo }}</p>
        <div class="botones">
          <div class="precio">{{ vehiculo.precio }}â‚¬/dÃ­a</div>
          <button class="saber-mas" (click)="verMas(vehiculo)">Ver mÃ¡s</button>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #sinVehiculos>
  <p>No hay vehÃ­culos disponibles.</p>
</ng-template>

<!-- Modal -->
<div class="modal-overlay" *ngIf="modalAbierto && vehiculoSeleccionado" (click)="cerrarModal($event)">
  <div class="modal-contenido" [class.modal-abierto]="vehiculoSeleccionado" (click)="$event.stopPropagation()">
    <button class="cerrar-modal" (click)="cerrarModal($event)">Ã—</button>

    <div class="modal-header">
      <h2>{{ vehiculoSeleccionado?.nombre_vehiculo }}</h2>
      <div class="modal-ubicacion">
        <span class="modal-pais">ðŸš— {{ vehiculoSeleccionado?.nombre_tipo_vehiculo }}</span>
        <span class="modal-ciudad">ðŸ’² {{ vehiculoSeleccionado?.precio }} â‚¬/dÃ­a</span>
      </div>
    </div>

    <div class="modal-body">
      <div class="modal-imagen-container">
        <img [src]="vehiculoSeleccionado?.imagen" alt="Imagen del vehÃ­culo" class="modal-imagen">
      </div>

      <div class="modal-info">
        <div class="modal-seccion">
          <h3>DescripciÃ³n</h3>
          <p>{{ vehiculoSeleccionado?.descripcion }}</p>
        </div>

        <div class="modal-seccion">
          <h3>Detalles</h3>
          <div class="modal-detalles">
            <div class="detalle-item">
              <span class="detalle-label">Caballos de vapor:</span>
              <span class="detalle-valor precio-destacado">{{ vehiculoSeleccionado?.cv }} CV</span>
            </div>
            <div class="detalle-item">
              <span class="detalle-label">Plazas:</span>
              <span class="detalle-valor">{{ vehiculoSeleccionado?.plazas }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-reservar" (click)="irAFormularioReserva(vehiculoSeleccionado.id)">Reservar Ahora</button>
    </div>
  </div>
</div>